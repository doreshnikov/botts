[13.10.24 00:08:35] DEBUG [asyncio.__init__:64] Using selector: KqueueSelector
[13.10.24 00:08:35] INFO [aiogram.dispatcher.start_polling:527] Start polling
[13.10.24 00:08:36] INFO [aiogram.dispatcher._polling:341] Run polling for bot @testing_dummy_bot id=6377300361 - 'Testing Dummy'
[13.10.24 00:08:36] DEBUG [root.__call__:92] Event: {
  "update_id": 802861997,
  "message": {
    "message_id": 3412,
    "chat": {
      "id": 265837243,
      "type": "private",
      "username": "doreshnikov"
    },
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "text": "/grade"
  }
}
[13.10.24 00:08:36] DEBUG [root.__call__:97] State: None
[13.10.24 00:08:36] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:08:36] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:08:36] INFO [aiogram.event.feed_update:172] Update id=802861997 is handled. Duration 160 ms by bot id=6377300361
[13.10.24 00:08:38] DEBUG [root.__call__:92] Event: {
  "update_id": 802861998,
  "callback_query": {
    "id": "1141762266890449775",
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "chat_instance": "5810223480658792996",
    "data": "event:00-introduction"
  }
}
[13.10.24 00:08:38] DEBUG [root.__call__:97] State: GradeState:EVENT_SELECT
[13.10.24 00:08:38] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:08:38] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:08:38] INFO [aiogram.event.feed_update:172] Update id=802861998 is handled. Duration 109 ms by bot id=6377300361
[13.10.24 00:08:39] DEBUG [root.__call__:92] Event: {
  "update_id": 802861999,
  "callback_query": {
    "id": "1141762267380567987",
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "chat_instance": "5810223480658792996",
    "data": "format:text"
  }
}
[13.10.24 00:08:39] DEBUG [root.__call__:97] State: GradeState:FORMAT_SELECT
[13.10.24 00:08:39] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:08:39] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:08:39] INFO [aiogram.event.feed_update:172] Update id=802861999 is handled. Duration 220 ms by bot id=6377300361
[13.10.24 00:09:01] DEBUG [root.__call__:92] Event: {
  "update_id": 802862000,
  "message": {
    "message_id": 3414,
    "chat": {
      "id": 265837243,
      "type": "private",
      "username": "doreshnikov"
    },
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "text": "def whoami(): os = __import__('os'); print(os.listdir())"
  }
}
[13.10.24 00:09:01] DEBUG [root.__call__:97] State: GradeState:CODE
[13.10.24 00:09:01] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:09:01] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:09:01] DEBUG [peewee.execute_sql:3319] ('INSERT INTO "submission" ("timestamp", "event", "file_path", "message_id", "student_id") VALUES (?, ?, ?, ?, ?)', [1728767342, '00-introduction', None, 3415, 0])
[13.10.24 00:09:01] INFO [aiogram.event.feed_update:172] Update id=802862000 is handled. Duration 172 ms by bot id=6377300361
[13.10.24 00:09:01] DEBUG [aiogram.utils.chat_action._worker:70] Started chat action 'typing' sender in chat_id=265837243 via bot id=6377300361
[13.10.24 00:09:01] DEBUG [peewee.execute_sql:3319] ('INSERT INTO "run" ("task_id", "solution_source", "solution_hash", "verdict", "comment", "invoker_port", "invoker_id", "submission_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?)', ['whoami', "def whoami(): os = __import__('os'); print(os.listdir())", '-173638941542581545', 'VE', "no name nodes with name '__import__' allowed", None, None, 236])
[13.10.24 00:09:01] DEBUG [aiogram.utils.chat_action._worker:81] Sent chat action 'typing' to chat_id=265837243 via bot 6377300361 (already sent actions 0)
[13.10.24 00:09:02] DEBUG [aiogram.utils.chat_action._worker:98] Finished chat action 'typing' sender in chat_id=265837243 via bot id=6377300361
[13.10.24 00:09:24] DEBUG [root.__call__:92] Event: {
  "update_id": 802862001,
  "message": {
    "message_id": 3416,
    "chat": {
      "id": 265837243,
      "type": "private",
      "username": "doreshnikov"
    },
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "text": "/runs"
  }
}
[13.10.24 00:09:24] DEBUG [root.__call__:97] State: None
[13.10.24 00:09:24] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:09:24] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:09:24] DEBUG [peewee.execute_sql:3319] ('SELECT COUNT(1) FROM (SELECT 1 FROM "run" AS "t1" INNER JOIN "submission" AS "t2" ON ("t1"."submission_id" = "t2"."id_") INNER JOIN "student" AS "t3" ON ("t2"."student_id" = "t3"."id_")) AS "_wrapped"', [])
[13.10.24 00:09:24] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."task_id", "t1"."solution_source", "t1"."solution_hash", "t1"."verdict", "t1"."comment", "t1"."invoker_port", "t1"."invoker_id", "t1"."submission_id", "t2"."id_", "t2"."timestamp", "t2"."event", "t2"."file_path", "t2"."message_id", "t2"."student_id", "t3"."id_", "t3"."name", "t3"."speciality", "t3"."group" FROM "run" AS "t1" INNER JOIN "submission" AS "t2" ON ("t1"."submission_id" = "t2"."id_") INNER JOIN "student" AS "t3" ON ("t2"."student_id" = "t3"."id_") ORDER BY "t2"."timestamp" LIMIT ? OFFSET ?', [8, 0])
[13.10.24 00:09:25] INFO [aiogram.event.feed_update:172] Update id=802862001 is handled. Duration 172 ms by bot id=6377300361
[13.10.24 00:09:28] DEBUG [root.__call__:92] Event: {
  "update_id": 802862002,
  "callback_query": {
    "id": "1141762265860734188",
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "chat_instance": "5810223480658792996",
    "data": "run_filter:action"
  }
}
[13.10.24 00:09:28] DEBUG [root.__call__:97] State: MasterState:RUNS_LIST
[13.10.24 00:09:28] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:09:28] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:09:28] INFO [aiogram.event.feed_update:172] Update id=802862002 is handled. Duration 121 ms by bot id=6377300361
[13.10.24 00:09:29] DEBUG [root.__call__:92] Event: {
  "update_id": 802862003,
  "callback_query": {
    "id": "1141762265900450401",
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "chat_instance": "5810223480658792996",
    "data": "run_action:filter"
  }
}
[13.10.24 00:09:29] DEBUG [root.__call__:97] State: MasterState:ACTION
[13.10.24 00:09:29] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:09:29] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:09:29] INFO [aiogram.event.feed_update:172] Update id=802862003 is handled. Duration 64 ms by bot id=6377300361
[13.10.24 00:09:34] DEBUG [root.__call__:92] Event: {
  "update_id": 802862004,
  "message": {
    "message_id": 3419,
    "chat": {
      "id": 265837243,
      "type": "private",
      "username": "doreshnikov"
    },
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "text": "run.id > 220"
  }
}
[13.10.24 00:09:34] DEBUG [root.__call__:97] State: MasterState:FILTER
[13.10.24 00:09:34] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:09:34] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:09:34] DEBUG [peewee.execute_sql:3319] ('SELECT COUNT(1) FROM (SELECT 1 FROM "run" AS "t1" INNER JOIN "submission" AS "t2" ON ("t1"."submission_id" = "t2"."id_") INNER JOIN "student" AS "t3" ON ("t2"."student_id" = "t3"."id_") WHERE ("t1"."id_" > ?)) AS "_wrapped"', [220])
[13.10.24 00:09:34] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."task_id", "t1"."solution_source", "t1"."solution_hash", "t1"."verdict", "t1"."comment", "t1"."invoker_port", "t1"."invoker_id", "t1"."submission_id", "t2"."id_", "t2"."timestamp", "t2"."event", "t2"."file_path", "t2"."message_id", "t2"."student_id", "t3"."id_", "t3"."name", "t3"."speciality", "t3"."group" FROM "run" AS "t1" INNER JOIN "submission" AS "t2" ON ("t1"."submission_id" = "t2"."id_") INNER JOIN "student" AS "t3" ON ("t2"."student_id" = "t3"."id_") WHERE ("t1"."id_" > ?) ORDER BY "t2"."timestamp" LIMIT ? OFFSET ?', [220, 8, 0])
[13.10.24 00:09:34] INFO [aiogram.event.feed_update:172] Update id=802862004 is handled. Duration 222 ms by bot id=6377300361
[13.10.24 00:09:35] DEBUG [root.__call__:92] Event: {
  "update_id": 802862005,
  "callback_query": {
    "id": "1141762265558392932",
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "chat_instance": "5810223480658792996",
    "data": "run_filter:action"
  }
}
[13.10.24 00:09:35] DEBUG [root.__call__:97] State: MasterState:RUNS_LIST
[13.10.24 00:09:35] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:09:35] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:09:35] INFO [aiogram.event.feed_update:172] Update id=802862005 is handled. Duration 112 ms by bot id=6377300361
[13.10.24 00:09:37] DEBUG [root.__call__:92] Event: {
  "update_id": 802862006,
  "callback_query": {
    "id": "1141762268777472327",
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "chat_instance": "5810223480658792996",
    "data": "run_action:rejudge"
  }
}
[13.10.24 00:09:37] DEBUG [root.__call__:97] State: MasterState:ACTION
[13.10.24 00:09:37] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:09:37] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:09:37] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."task_id", "t1"."solution_source", "t1"."solution_hash", "t1"."verdict", "t1"."comment", "t1"."invoker_port", "t1"."invoker_id", "t1"."submission_id", "t2"."id_", "t2"."timestamp", "t2"."event", "t2"."file_path", "t2"."message_id", "t2"."student_id", "t3"."id_", "t3"."name", "t3"."speciality", "t3"."group" FROM "run" AS "t1" INNER JOIN "submission" AS "t2" ON ("t1"."submission_id" = "t2"."id_") INNER JOIN "student" AS "t3" ON ("t2"."student_id" = "t3"."id_") WHERE ("t1"."id_" > ?) ORDER BY "t2"."timestamp" LIMIT ? OFFSET ?', [220, -1, 0])
[13.10.24 00:09:37] INFO [aiogram.event.feed_update:172] Update id=802862006 is handled. Duration 97 ms by bot id=6377300361
[13.10.24 00:09:40] DEBUG [root.__call__:92] Event: {
  "update_id": 802862007,
  "callback_query": {
    "id": "1141762268407561297",
    "from_user": {
      "id": 265837243,
      "username": "doreshnikov"
    },
    "chat_instance": "5810223480658792996",
    "data": "run_rejudge:1"
  }
}
[13.10.24 00:09:40] DEBUG [root.__call__:97] State: MasterState:ACTION
[13.10.24 00:09:40] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."id_", "t1"."name", "t1"."speciality", "t1"."group" FROM "student" AS "t1" INNER JOIN "tg_user" AS "t2" ON ("t2"."student_id" = "t1"."id_") WHERE ("t2"."tg_id" = ?) LIMIT ?', [265837243, 1])
[13.10.24 00:09:40] DEBUG [peewee.execute_sql:3319] ('SELECT "t1"."student_id", "t1"."tg_id", "t1"."username" FROM "tg_user" AS "t1" WHERE ("t1"."student_id" = ?) LIMIT ?', [0, 1])
[13.10.24 00:09:40] INFO [aiogram.event.feed_update:172] Update id=802862007 is handled. Duration 438 ms by bot id=6377300361
[13.10.24 00:09:40] DEBUG [aiogram.utils.chat_action._worker:70] Started chat action 'typing' sender in chat_id=6377300361 via bot id=6377300361
[13.10.24 00:09:40] INFO [socket-wrapper.__enter__:47] Connected on port 8091
[13.10.24 00:09:40] INFO [socket-wrapper.__exit__:52] Released port 8091
[13.10.24 00:09:40] INFO [socket-wrapper.__enter__:47] Connected on port 8092
[13.10.24 00:09:40] INFO [socket-wrapper.__exit__:52] Released port 8092
[13.10.24 00:09:40] INFO [socket-wrapper.__enter__:47] Connected on port 8091
[13.10.24 00:09:40] INFO [socket-wrapper.__exit__:52] Released port 8091
[13.10.24 00:09:40] INFO [socket-wrapper.__enter__:47] Connected on port 8092
[13.10.24 00:09:40] INFO [socket-wrapper.__exit__:52] Released port 8092
[13.10.24 00:09:40] INFO [socket-wrapper.__enter__:47] Connected on port 8091
[13.10.24 00:09:40] INFO [socket-wrapper.__exit__:52] Released port 8091
[13.10.24 00:09:40] INFO [socket-wrapper.__enter__:47] Connected on port 8092
[13.10.24 00:09:40] INFO [socket-wrapper.__exit__:52] Released port 8092
[13.10.24 00:09:40] INFO [socket-wrapper.__enter__:47] Connected on port 8091
[13.10.24 00:09:40] INFO [socket-wrapper.__exit__:52] Released port 8091
[13.10.24 00:09:40] DEBUG [peewee.execute_sql:3319] ('UPDATE "run" SET "task_id" = ?, "solution_source" = ?, "solution_hash" = ?, "verdict" = ?, "comment" = ?, "invoker_port" = ?, "invoker_id" = ?, "submission_id" = ? WHERE ("run"."id_" = ?)', ['unique', 'def unique(a):\n    b = []\n    for x in a:\n        if x not in b:\n            b.append(x)\n    return b', '-2071454641402250415', 'OK', None, None, None, 231, 221])
[13.10.24 00:09:40] DEBUG [aiogram.utils.chat_action._worker:81] Sent chat action 'typing' to chat_id=6377300361 via bot 6377300361 (already sent actions 0)
[13.10.24 00:09:40] INFO [socket-wrapper.__enter__:47] Connected on port 8092
[13.10.24 00:09:40] INFO [socket-wrapper.__exit__:52] Released port 8092
[13.10.24 00:09:40] DEBUG [aiogram.utils.chat_action._worker:98] Finished chat action 'typing' sender in chat_id=6377300361 via bot id=6377300361
[13.10.24 00:09:40] ERROR [asyncio.default_exception_handler:1820] Task exception was never retrieved
future: <Task finished name='Task-59' coro=<Runner.rejudge() done, defined at /Users/doreshhh/Projects/my/botts/botts/testsys/components/test/runner.py:109> exception=KeyError('student_id')>
Traceback (most recent call last):
  File "/Users/doreshhh/Projects/my/botts/botts/testsys/components/test/runner.py", line 141, in rejudge
    result = Runner(task)._do_run(solution)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/doreshhh/Projects/my/botts/botts/testsys/components/test/runner.py", line 78, in _do_run
    check_result = self.task.checker.check(test, output, answer, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/doreshhh/Projects/my/botts/botts/testsys/config/tasks/test/whoami.py", line 15, in check
    student_id: int = kwargs['student_id']
                      ~~~~~~^^^^^^^^^^^^^^
KeyError: 'student_id'
[13.10.24 00:11:30] WARNING [aiogram.dispatcher._signal_stop_polling:455] Received SIGINT signal
[13.10.24 00:11:30] INFO [aiogram.dispatcher._polling:359] Polling stopped for bot @testing_dummy_bot id=6377300361 - 'Testing Dummy'
[13.10.24 00:11:30] INFO [aiogram.dispatcher.start_polling:554] Polling stopped
